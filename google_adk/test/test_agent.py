"""
ê°•ë‚¨ëŒ€í•™êµ ì¡¸ì—…ì´ìˆ˜í•™ì  Agent í…ŒìŠ¤íŠ¸

Agentê°€ ìë™ìœ¼ë¡œ Toolì„ ì„ íƒí•˜ê³ , ê²€ìƒ‰í•˜ê³ , ê²°ê³¼ë¥¼ ì •ë¦¬í•˜ëŠ” ê³¼ì • í™•ì¸
"""

from agent import kangnam_agent


def print_divider(title=""):
    """êµ¬ë¶„ì„  ì¶œë ¥"""
    if title:
        print(f"\n{'='*70}")
        print(f"  {title}")
        print(f"{'='*70}\n")
    else:
        print(f"\n{'-'*70}\n")


# ============================================================================
# Agent ì‘ë™ ë°©ì‹ ì„¤ëª…
# ============================================================================
print_divider("ê°•ë‚¨ëŒ€í•™êµ ì¡¸ì—…ì´ìˆ˜í•™ì  Agent í…ŒìŠ¤íŠ¸")

print("""
ğŸ¤– Agent ì‘ë™ ë°©ì‹:

1. ì‚¬ìš©ì ì§ˆë¬¸ ë°›ê¸°
   ì˜ˆ: "2024ë…„ ì…í•™ìƒ ë³µì§€ìœµí•©ëŒ€í•™ ì¡¸ì—… ìš”ê±´ ì•Œë ¤ì¤˜"
   
2. ì§ˆë¬¸ ë¶„ì„ (AIê°€ ìë™ìœ¼ë¡œ)
   - í•™ë…„ë„ íŒŒì•…: 2024ë…„
   - ëŒ€í•™ íŒŒì•…: ë³µì§€ìœµí•©ëŒ€í•™
   - ì¹´í…Œê³ ë¦¬ íŒŒì•…: ì¡¸ì—… ìš”ê±´
   
3. Tool ì„ íƒ (AIê°€ ìë™ìœ¼ë¡œ)
   - search_by_year_and_college() ì„ íƒ
   - ë˜ëŠ” search_graduation_requirements() ì„ íƒ
   
4. Tool ì‹¤í–‰ (ìë™)
   - ê²€ìƒ‰ ê²°ê³¼ ë°›ê¸°
   
5. ê²°ê³¼ ì •ë¦¬ (AIê°€ ìë™ìœ¼ë¡œ)
   - ê²€ìƒ‰ ê²°ê³¼ë¥¼ ìì—°ì–´ë¡œ ë³€í™˜
   - í•µì‹¬ ì •ë³´ ì¶”ì¶œ ë° ì •ë¦¬
   - ì¶œì²˜ ëª…ì‹œ
   
6. ë‹µë³€ ìƒì„±
""")


# ============================================================================
# í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ë“¤
# ============================================================================
test_questions = [
    "2024ë…„ ì…í•™ìƒì¸ë° ë³µì§€ìœµí•©ëŒ€í•™ ì¡¸ì—… ìš”ê±´ ì•Œë ¤ì¤˜",
    "ê³µê³¼ëŒ€í•™ ê¸°ì´ˆêµì–‘ í•™ì ì€ ëª‡ í•™ì ì´ì•¼?",
    "ì–´ë–¤ ì •ë³´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆì–´?",
    "2019ë…„ ì…í•™ìƒ ìµœì†Œ ì¡¸ì—…í•™ì ì€?",
]

print_divider("ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘")

for i, question in enumerate(test_questions, 1):
    print(f"\n{'='*70}")
    print(f"ì§ˆë¬¸ {i}: {question}")
    print(f"{'='*70}\n")
    
    try:
        # Agentì—ê²Œ ì§ˆë¬¸
        response = kangnam_agent.query(question)
        
        print("ğŸ¤– Agent ë‹µë³€:")
        print(f"{response}\n")
        
        # Tool ì‚¬ìš© ë‚´ì—­ (ìˆë‹¤ë©´)
        if hasattr(kangnam_agent, 'last_tool_calls'):
            print(f"\nğŸ”§ ì‚¬ìš©ëœ Tool:")
            for tool_call in kangnam_agent.last_tool_calls:
                print(f"  - {tool_call['name']}({tool_call['args']})")
        
    except Exception as e:
        print(f"âŒ ì˜¤ë¥˜ ë°œìƒ: {str(e)}")
    
    print_divider()


# ============================================================================
# ëŒ€í™”í˜• ëª¨ë“œ
# ============================================================================
print_divider("ëŒ€í™”í˜• ëª¨ë“œ")

print("""
ğŸ’¬ ì´ì œ ì§ì ‘ ì§ˆë¬¸í•´ë³´ì„¸ìš”!

ì˜ˆì‹œ ì§ˆë¬¸:
- "2024ë…„ ì…í•™ìƒ ì¡¸ì—… ìš”ê±´ ì•Œë ¤ì¤˜"
- "ê³µê³¼ëŒ€í•™ êµì–‘ ê³¼ëª©ì´ ë­ì•¼?"
- "ìµœì†Œ ì¡¸ì—…í•™ì ì€?"
- "ì–´ë–¤ ì •ë³´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆì–´?"

ì¢…ë£Œ: 'quit', 'exit', 'q' ì…ë ¥
""")

while True:
    try:
        question = input("\nì§ˆë¬¸: ").strip()
        
        if question.lower() in ['quit', 'exit', 'q', 'ì¢…ë£Œ']:
            print("\nğŸ‘‹ Agentë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.")
            break
        
        if not question:
            continue
        
        print(f"\nğŸ¤– Agentê°€ ë‹µë³€ì„ ìƒì„± ì¤‘...\n")
        
        # Agentì—ê²Œ ì§ˆë¬¸
        response = kangnam_agent.query(question)
        
        print("â”€" * 70)
        print(response)
        print("â”€" * 70)
        
    except KeyboardInterrupt:
        print("\n\nğŸ‘‹ Agentë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.")
        break
    except Exception as e:
        print(f"\nâŒ ì˜¤ë¥˜: {str(e)}")


# ============================================================================
# í…ŒìŠ¤íŠ¸ ì™„ë£Œ
# ============================================================================
print_divider("âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ!")

print("""
ğŸ¯ í™•ì¸ëœ ë‚´ìš©:

1. Agentê°€ ì§ˆë¬¸ì„ ë¶„ì„í•˜ì—¬ ì ì ˆí•œ Tool ì„ íƒ âœ…
2. Toolì´ ê²€ìƒ‰ ì‹¤í–‰ âœ…
3. Agentê°€ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ìì—°ì–´ë¡œ ì •ë¦¬ âœ…
4. ì¶œì²˜ë¥¼ ëª…ì‹œí•˜ì—¬ ë‹µë³€ ìƒì„± âœ…

ğŸ“Œ í•µì‹¬:
- ì‚¬ìš©ìëŠ” ê·¸ëƒ¥ ìì—°ì–´ë¡œ ì§ˆë¬¸ë§Œ í•˜ë©´ ë¨
- Agentê°€ ì•Œì•„ì„œ Tool ì„ íƒ, ì‹¤í–‰, ê²°ê³¼ ì •ë¦¬
- ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì´í•´í•˜ê¸° ì‰¬ìš´ ë‹µë³€ìœ¼ë¡œ ë³€í™˜
""")

